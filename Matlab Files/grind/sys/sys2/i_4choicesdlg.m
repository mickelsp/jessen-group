function choice = i_4choicesdlg(title, prompt, choices)
if nargin ~= 1
   h1 = figure( ...
      'Units','characters',...
      'PaperUnits',get(0,'defaultfigurePaperUnits'),...
      'Color', [0.941 0.941 0.941], ...
      'IntegerHandle','off',...
      'InvertHardcopy',get(0,'defaultfigureInvertHardcopy'),...
      'MenuBar','none',...
      'Name', title, ...
      'NumberTitle','off',...
      'PaperPosition',get(0,'defaultfigurePaperPosition'),...
      'PaperSize',get(0,'defaultfigurePaperSize'),...
      'PaperType',get(0,'defaultfigurePaperType'),...
      'Position', [103.8 36.6923076923077 53 24.7692307692308], ...
      'Resize','off',...
      'HandleVisibility','callback',...
      'UserData', [], ...
      'CreateFcn', 'movegui(gcbf,''center'')',...
      'Tag','figure1',...
      'Visible','on');

   uicontrol( ...
      'Parent', h1, ...
      'Units','characters',...
      'FontUnits','pixels',...
      'FontSize', 10.6666666666667, ...
      'Position', [6 18.6153846153846 40.4 2.23076923076923], ...
      'String', prompt, ...
      'Style','text',...
      'Tag','text1');
   uicontrol( ...
      'Parent', h1, ...
      'Units','characters',...
      'Callback',sprintf('i_4choicesdlg(''%s'')',choices{1}),...
      'FontUnits','pixels',...
      'FontSize', 10.6666666666667, ...
      'Position', [6 13.9230769230769 40.2 3.07692307692308], ...
      'String', choices{1}, ...
      'Tag','pushbutton1' );
   uicontrol( ...
      'Parent', h1, ...
      'Units','characters',...
      'Callback',sprintf('i_4choicesdlg(''%s'')',choices{2}),...
      'FontUnits','pixels',...
      'FontSize', 10.6666666666667, ...
      'Position', [6 9.69230769230769 40.2 3.07692307692308], ...
      'String', choices{2}, ...
      'Tag','pushbutton2');
   uicontrol( ...
      'Parent', h1, ...
      'Units','characters',...
      'Callback',sprintf('i_4choicesdlg(''%s'')',choices{3}),...
      'FontUnits','pixels',...
      'FontSize', 10.6666666666667, ...
      'Position', [6 5.46153846153846 40.2 3.07692307692308], ...
      'String', choices{3}, ...
      'Tag','pushbutton3');
   uicontrol( ...
      'Parent', h1, ...
      'Units','characters',...
      'Callback',sprintf('i_4choicesdlg(''%s'')',choices{4}),...
      'FontUnits','pixels',...
      'FontSize', 10.6666666666667, ...
      'Position', [6 1.15384615384615 40.2 3.07692307692308], ...
      'String', choices{4}, ...
      'Tag','pushbutton4' );
   uiwait(h1);
   if ishandle(h1)
      choice = get(h1, 'userdata');
      close(h1);
   else
      choice='';
   end;
else
   set(gcbf, 'userdata', title);
   uiresume;
end;

